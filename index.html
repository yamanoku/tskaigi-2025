
    <!doctype html>
    <html lang="ja">
      <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>転生したらTypeScriptのEnumだった件～型安全性とエコシステムの変化で挫けそうになっているんだが～</title>
        <meta name="og:title" content="転生したらTypeScriptのEnumだった件～型安全性とエコシステムの変化で挫けそうになっているんだが～">
        <meta name="og:description" content="TSKaigi 2025 DAY1のyamanokuの発表資料">
        <meta name="og:image" content="https://yamanoku.net/tskaigi-2025/images/slide-01.png">
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:site" content="@yamanoku">
        <meta name="twitter:image:alt" content="転生したらTypeScriptのEnumだった件～型安全性とエコシステムの変化で挫けそうになっているんだが～ 2025-05-23 TSKaigi 2025">
        <meta property="og:locale" content="ja">
        <link rel="stylesheet" href="https://cdn.skypack.dev/yama-normalize">
        <script src="https://unpkg.com/@highlightjs/cdn-assets@11.6.0/highlight.min.js"></script>
        <link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@11.6.0/styles/a11y-dark.min.css">
        <script type="module">hljs.initHighlightingOnLoad()</script>
        <style>code{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:1em;}pre code.hljs{padding:calc(var(--rhythm)*3);}footer{padding: var(--y-rhythm-3);text-align: center;}</style>
      </head>
      <body>
        <main id="main">
          <hgroup>
            <h1 style="margin-block-end: 0"><span style="word-break:keep-all;overflow-wrap:anywhere">転生したら​TypeScriptの​Enumだった​件</span></h1>
            <p style="font-size: 1.425rem"><span style="word-break:keep-all;overflow-wrap:anywhere">～型​安全性と​エコシステムの​変化で​挫けそうになっているんだが​～</span></p>
          </hgroup>
          <p><img src="./images/slide-01.png" alt="発表スライド表紙：転生したらTypeScriptのEnumだった件～型安全性とエコシステムの変化で挫けそうになっているんだが～ 2025-05-23 TSKaigi 2025"></p>
<h2>発表概要</h2>
<p>「…ここは、一体？」</p>
<p>気づけば俺は、TypeScriptのEnumとして異世界転生していた。与えられたのは名前付き定数を表現する力「列挙型」。
しかし型安全性を重視する世界において、Union型とconst assertionsたちが我が物顔で闊歩し、俺の居場所を奪っていくのであった。</p>
<p>可読性と保守性を高めるために生まれたはずの俺が、今や時代遅れの遺物扱い。
さらに追い打ちをかけるように、Node.jsの「--experimental-strip-types」とTypeScriptの「--erasableSyntaxOnly」のオプションたちが、存在そのものを消し去ろうとする。</p>
<p>「このままでは…このままでは俺は消えてしまうのか…？」</p>
<p>それでも俺は諦めない。同じように居場所を失いかけている仲間たちと共に、俺は立ち上がる。型安全性、エコシステム、そして自身の存在意義についてを考える旅が今始まろうとしていた…。</p>
<hr>
<p>この発表ではTypeScriptにおけるEnumが辿ってきた歴史とその苦境についてを解説していきます。聴者がEnumを使うことを改めて見つめ直すような内容を提供いたします。</p>
<h2>発表内容</h2>
<p><img src="./images/slide-02.png" alt="オフィスを背景に、28歳のシステムエンジニア「列挙 純」がチェック柄シャツでにこやかに右手を挙げ、同僚の女性に挨拶している。"></p>
<p>主人公は「列挙 純」という名前の男性です。彼はシステムエンジニアとして働いていて、主にJavaを使っています。</p>
<p>静的型付け言語が大好きで、最近はTypeScriptという言語についても興味が湧いてきました。</p>
<p><img src="./images/slide-03.png" alt="都会の車道で大型トラックと、チェック柄のシャツを着た若い男性が両手を広げて立ちすくんでおり、衝突寸前の場面。"></p>
<p>そんな彼は、以前から興味をもっていたTSKaigiへ参加するため、チケットを申し込み、会場へ向かっていました。</p>
<p>その道中、突如として暴走したトラックが彼の前に現れ、彼の視界は一気に真っ暗になりました。</p>
<p><img src="./images/slide-04.png" alt="薄暗い空間の中央でスポットライトを浴び、床に座った列挙が上空を驚いた表情で見上げている。"></p>
<p>次に彼が目を覚ましたのは、見知らぬ暗闇の中。そこからぼんやりと光が差し込んできて、天から声が響きました。</p>
<p>「列挙 純よ、目覚めなさい」</p>
<p>「お前はこれから役割を与えられてこの世界で生きることになる」</p>
<p><img src="./images/slide-05.png" alt="黒い背景の中央にEnumという白い文字が浮かび上がっている。"></p>
<p>「それはTypeScriptのEnumだ」</p>
<p>彼はTypeScriptという国で、<strong>列挙型</strong>として生きていく運命を背負わされたのです。</p>
<p><img src="./images/slide-06.png" alt="中世風の街並みを赤いマントを翻しながら進む列挙を、国民たちが拍手しながら笑顔で迎えている。"></p>
<p>Javaで長年Enumを使いこなしてきた彼は、TypeScriptでもその力が存分に発揮されました。</p>
<p>定数をセットとしてまとめて見やすくしたり、定数に値を付与したり、数値の逆マッピングができたりと、様々な能力を発揮しTypeScriptの国民から慕われていました。</p>
<p><img src="./images/slide-07.png" alt="中世風の木造家屋が並ぶ石畳の通りで列挙が困惑した表情で歩いている。周囲には腕を組んでにらむ男性や眉をひそめた年配女性、睨みつける少女など、冷たい視線を向ける町人たちが立ち、かつて慕われた彼への不満と疑念が渦巻いている様子。"></p>
<p>しかし彼が活躍していたその裏で、次第に国民たちから不満の声が上がり始めました。</p>
<p>数値上の型安全性問題、バンドルサイズやTree Shakingが効かないこと、そもそも逆マッピングなんかしねぇよと、列挙の役割を疑うようになってきます。</p>
<p><img src="./images/slide-08.png" alt="城壁の回廊で、汗を浮かべ胸を押さえる列挙を、笑顔で敬礼をする白衣の看護師（Union型の擬人化）と、腕を組んだ黒服の青年（as constの擬人化）が見つめている"></p>
<p>列挙は自らの欠点を改善していきましたが、人々はEnumよりも<code>as const</code>でのオブジェクトリテラルやUnion型の方が優れているのではないかと考えるようになりました。</p>
<p>さらに彼に追い打ちをかけることが起きます。</p>
<p><img src="./images/slide-09.png" alt="Node.jsの--experimental-strip-typesオプション"></p>
<p>Node.js国ではTypeScript国との交流を活発にさせるため<code>--experimental-strip-types</code>という型注釈を除去する新たな法律を制定しました</p>
<p><img src="./images/slide-10.png" alt="TypeScriptの--erasableSyntaxOnlyオプション"></p>
<p>さらにTypeScript国からは<code>--erasableSyntaxOnly</code>というEnumを含むTypeScript特有のコントラクトを警告する法律を制定しました。</p>
<p>これらの法律が制定され、EnumといったTypeScriptでの固有の役割をもつ者たちの立場はどんどんなくなっていきました。</p>
<p><img src="./images/slide-11.png" alt="城壁の向こうに赤屋根の城下町を望む草原で、ボロボロに汚れたチェック柄の服を着た若者列挙 純が杖にすがり、頬に一筋の涙を伝わせながらうなだれて座っている。"></p>
<p>列挙はTypeScript国から居場所を失いつつあり、深い絶望の中にいました。</p>
<p>「俺は、この世界に転生してきたのに、いったいどう役立てばいいんだろう…？」</p>
<p>失意の中、彼は国にはいられなくなり、あてもなく彷徨っていました。</p>
<p><img src="./images/slide-12.png" alt="中世風の町の広場で、ボロ服をまとった「列挙 純」が片膝をつきながら、王冠と赤いマントを着けた ECMA International 国の王と固く握手を交わしている。王は温かな笑みを浮かべて列挙を立ち上がらせ、周囲では市民たちが歓喜の声を上げている。"></p>
<p>そのとき、彼に対して歩み寄ってくる一人の人物が現れました。</p>
<p>その人物は、ECMA International国の王様でした。</p>
<p>王様は言いました。「列挙よ、君の力が必要だ。我々の国に来て、新たな役割を果たしてほしい」と。</p>
<p><img src="./images/slide-13.png" alt="Proposal for ECMAScript enumsのGitHub README"></p>
<p>そうしてECMA International国ではEnumを正式にJavaScriptの一部として取り込もうとする「Proposal for ECMAScript enums」プロジェクトが動き出したのです。</p>
<p><img src="./images/slide-14.png" alt="TypeScriptリポジトリのImplement erasable Enum AnnotationsというGitHub PullRequest"></p>
<p>またTypeScript国でも、Enumの型注釈を作り列挙型を生かしつつ型情報だけを削除できるようにしたい声もあげられています。</p>
<p>そう、Enumの価値を理解し、必要としている人たちはそこに居たのです。</p>
<p><img src="./images/slide-15.png" alt="城の回廊で、ひげを蓄えて赤いマントを羽織った列挙 純が満面の笑みで語りかけ、側では白衣とナースキャップ姿の女性が敬礼し、もう一人の若者が腕を組んで微笑む。TypeScript国で対立していた仲間たちと和解を果たし、新たな未来を語り合う、希望と友情に満ちたエンディングシーン。"></p>
<p>居場所がなくなったと思われたEnumの役割が見直され、<code>as const</code>やUnion型らと一緒に肩を並べて笑える日がまた来るかもしれません。</p>
<p><img src="./images/slide-16.png" alt="「転生したらTypeScriptのEnumだった件～型安全性とエコシステムの変化で挫けそうになっているんだが～」のタイトルスライド"></p>
<p>この物語は当初は<strong>なろう系</strong>のストーリーでした。</p>
<p>しかし、この話はいつの間にか<strong>追放無双系</strong>の物語へと変わりました。</p>
<p><img src="./images/slide-17.png" alt="「パーティーから追放された俺、ECMAScriptの一員として、TypeScriptで無双してやります！」のタイトルスライド"></p>
<p>なのでタイトルは『パーティーから追放された俺、ECMAScriptの一員として、TypeScriptで無双してやります！』にしたほうがふさわしいかもしれません。</p>
<p><img src="./images/slide-18.png" alt="Ron Buckton 氏の X（旧 Twitter）のツイートのスクリーンショット。「Microsoft に 18 年在籍し、そのうち約 10 年を TypeScript 開発に費やしたが、今回のレイオフで解雇された。仕事探しの前に数日整理する時間が欲しい。これまで支えてくれた皆に感謝」と英語で書かれており、約 5 万件のいいねが表示されている。"></p>
<p>ーーーすみません、ここで緊急ニュースです。</p>
<p>なんとこの続きを執筆する予定だった作者が、Microsoftからレイオフされてしまったとのことです。</p>
<p>タイトルが今の形だとちょっと使えない雰囲気になってしまいましたね。</p>
<p><img src="./images/slide-19.png" alt="黒背景にさし変わった「パーティーから追放された俺、ECMAScriptの一員としてTypeScriptで無双できるかな…？」のタイトルスライド"></p>
<p>タイトルは改めまして、</p>
<p>『パーティーから追放された俺、ECMAScriptの一員としてTypeScriptで無双できるかな…？』</p>
<p>に変更されました。</p>
<p>列挙 純の今後に、皆様ご期待ください。</p>
<h2>参考資料</h2>
<ul>
<li><a href="https://www.typescriptlang.org/docs/handbook/enums.html">TypeScript: Handbook - Enums</a></li>
<li><a href="https://typescriptbook.jp/reference/values-types-variables/enum">列挙型 (enum) | TypeScript入門『サバイバルTypeScript』</a>
<ul>
<li><a href="https://typescriptbook.jp/reference/values-types-variables/enum/enum-problems-and-alternatives-to-enums">列挙型(enum)の問題点と代替手段 | TypeScript入門『サバイバルTypeScript』</a></li>
</ul>
</li>
<li><a href="https://www.kabuku.co.jp/developers/good-bye-typescript-enum">さようなら、TypeScript enum - 株式会社カブク</a></li>
<li><a href="https://engineering.linecorp.com/ja/blog/typescript-enum-tree-shaking">TypeScriptのenumを使わないほうがいい理由を、Tree-shakingの観点で紹介します</a></li>
<li><a href="https://github.com/tc39/proposal-enum">tc39/proposal-enum: Proposal for ECMAScript enums</a></li>
<li><a href="https://github.com/Microsoft/TypeScript/issues/30590">Why does TypeScript PM advice not to use const enum? If so, why not take out from language SPEC · Issue #30590 · microsoft/TypeScript</a></li>
<li><a href="https://github.com/microsoft/TypeScript/pull/61414">Implement erasable Enum Annotations by caitp · Pull Request #61414 · microsoft/TypeScript</a></li>
<li><a href="https://x.com/rbuckton/status/1922364558426911039">https://x.com/rbuckton/status/1922364558426911039</a></li>
</ul>

        </main>
        <footer>
          <p>Copyright 2025, Okuto Oyama</p>
          <p>Source : <a href="https://github.com/yamanoku/tskaigi-2025/" target="_blank">yamanoku/tskaigi-2025</a></p>
        </footer>
      </body>
    </html>
  